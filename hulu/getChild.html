<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      /*
        let arr = [
          { id: 1, name: "haha", pid: 0 },
          { id: 2, name: "lilei", pid: 1 },
          { id: 3, name: "hanmeimei", pid: 1 },
          { id: 4, name: "tony", pid: 2 },
          { id: 5, name: "tom", pid: 3 },
          { id: 6, name: "david", pid: 4 },
        ];

        [{
        id: 1,
        name: "",
        chidlren: [
        { id: 2, name: "lilei", pid: 1, children: [{ id: 4, name: "tony", pid: 2, children: [ { id: 6, name: "david", pid: 4 }] }] }, { id: 3, name: "hanmeimei", pid: 1, children: [ { id: 5, name: "tom", pid: 3 }] }],
        pid: 0,
        }]
    */

      function getChild(data, pid, result = []) {
        for (const item of data) {
          if (item.pid === pid) {
            const temp = { ...item, child: [] };
            result.push(temp);
            getChild(data, item.id, temp.child, true);
          }
        }
        return result;
      }

      let arr = [
        { id: 1, name: 'haha', pid: 0 },
        { id: 2, name: 'lilei', pid: 1 },
        { id: 3, name: 'hanmeimei', pid: 1 },
        { id: 4, name: 'tony', pid: 2 },
        { id: 5, name: 'tom', pid: 3 },
        { id: 6, name: 'david', pid: 4 }
      ];

      const res = getChild(arr, 0);
      console.log('res:\n', res);
    </script>
  </body>
</html>
